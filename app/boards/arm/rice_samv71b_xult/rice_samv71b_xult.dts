/dts-v1/;

#include <atmel/samv71q21b.dtsi>
#include <dt-bindings/pinctrl/samv71q-pinctrl.h>

/ {
    model = "RICE ATSAMV71 Xplained Ultra Development Board";
    compatible = "rice,samv71b_xult", "atmel,samv71q21b", "atmel,samv71b";

    chosen {
		zephyr,sram = &sram0;
		zephyr,flash = &flash0;
		zephyr,code-partition = &slot0_partition;
		zephyr,canbus = &can1;
	};

    dap: dap {
        label = "dap";
        compatible = "rice,dap";

		tck_swclk_gpios = <&pioa 0 GPIO_ACTIVE_HIGH>;
		tms_swdio_gpios = <&pioa 6 GPIO_ACTIVE_HIGH>;
		tdo_gpios = <&piod 28 GPIO_ACTIVE_HIGH>;
		tdi_gpios = <&piod 27 GPIO_ACTIVE_HIGH>;
		nreset_gpios = <&piod 11 GPIO_ACTIVE_HIGH>;
		vtref_gpios = <&piod 30 GPIO_ACTIVE_HIGH>;
		led_connect_gpios = <&pioa 23 GPIO_ACTIVE_LOW>;
		led_running_gpios = <&pioa 23 GPIO_ACTIVE_LOW>;
    };

    io: io {
        label = "io";
        compatible = "rice,io";
    };

    vcp: vcp {
        label = "vcp";
        compatible = "rice,vcp";
        uart = <&uart1>;
    };
};

&cpu0 {
	clock-frequency = <300000000>;
};

&flash0 {
	partitions {
		compatible = "fixed-partitions";
		#address-cells = <1>;
		#size-cells = <1>;

		/*
		 * The first half of sector 0 (64 kbytes)
		 * is reserved for the bootloader
		 */
		boot_partition: partition@0 {
			label = "mcuboot";
			reg = <0x0 0x00010000>;
			read-only;
		};

		/* 512 bytes within the second half of sector 0 */
		manufacturer_partition: partition@10000 {
			label = "manufacturing";
			reg = <0x00010000 0x00000200>;
			read-only;
		};

		/* From sector 1 to sector 7 (included): slot0 (896 kbytes) */
		slot0_partition: partition@20000 {
			label = "image-0";
			reg = <0x00020000 0x000e0000>;
		};

		/* From sector 8 to sector 14 (included): slot1 (896 kbytes) */
		slot1_partition: partition@100000 {
			label = "image-1";
			reg = <0x00100000 0x000e0000>;
		};

		/* Sector 15: scratch (128 kbytes) */
		scratch_partition: partition@1e0000 {
			label = "image-scratch";
			reg = <0x001e0000 0x00020000>;
		};
	};
};

&pinctrl {
    uart1_pinctrl: uart1_pinctrl {
		group1 {
			pinmux = <PA5C_UART1_RXD>,
					 <PA4C_UART1_TXD>;
		};
	};
};

&pioa {
	status = "okay";
};

&piob {
	status = "okay";
};

&pioc {
	status = "okay";
};

&piod {
	status = "okay";
};

&pioe {
	status = "okay";
};

&uart1 {
    status = "okay";
	current-speed = <115200>;
    pinctrl-0 = <&uart1_pinctrl>;
	pinctrl-names = "default";
};

usbd: &usbhs {
	status = "okay";
};

&wdt {
	status = "okay";
};
